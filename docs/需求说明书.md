# 企业碳计量数字化平台项目需求说明书

文件状态：

[√] 草稿

[  ] 正式发布

[  ] 正在修改

文件标识：CARBON-REQ-2024

当前版本：V1.0

作    者：系统分析师

完成日期：2024年

中汽数据（天津）有限公司

---

## 关于本文档：

**主    题**：企业碳计量数字化平台项目_需求说明书

**说    明**：企业碳计量数字化平台功能需求说明

**适用对象**：需求人员，变更相关人员，研发人员等

---

## 修订记录

| 版本 | 类型 | 修改日期 | 修改者 | 修改说明 |
|------|------|----------|--------|----------|
| V1.0 | C    | 2024年   | 系统分析师 | 创建文档 |

说明：类型－创建（C）、修改（U）、删除（D）、增加（A）

---

## 目录

1. [文档介绍](#1-文档介绍)
   1.1. [文档范围](#11-文档范围)
   1.2. [术语定义](#12-术语定义)
   1.3. [产品目的](#13-产品目的)
   1.4. [产品面向的用户群体](#14-产品面向的用户群体)
2. [功能需求](#2-功能需求)
   2.1. [功能列表](#21-功能列表)
   2.2. [详细功能描述](#22-详细功能描述)
3. [安全需求](#3-安全需求)
   3.1. [应用安全需求](#31-应用安全需求)
   3.2. [数据安全需求](#32-数据安全需求)
4. [性能需求](#4-性能需求)
   4.1. [系统性能](#41-系统性能)
5. [系统运行环境](#5-系统运行环境)
   5.1. [硬件](#51-硬件)
   5.2. [软件](#52-软件)

---

## 1. 文档介绍

### 1.1. 文档范围

本文档涵盖了企业碳计量数字化平台项目的功能需求、安全需求、性能需求以及系统运行环境要求。功能模块包括碳排放数据管理、计算引擎、组织管理、报表分析、用户权限管理等核心模块。

### 1.2. 术语定义

| 序号 | 名词 | 解释 |
|------|------|------|
| 1 | GHG Protocol | 温室气体核算议定书，国际公认的碳排放核算标准 |
| 2 | Scope 1 | 直接排放，企业拥有或控制的排放源产生的温室气体排放 |
| 3 | Scope 2 | 能源间接排放，外购电力、蒸汽、加热和制冷产生的排放 |
| 4 | Scope 3 | 其他间接排放，价值链中产生的所有间接排放 |
| 5 | tCO2e | 二氧化碳当量，用于比较不同温室气体排放的通用单位 |
| 6 | 排放因子 | 单位活动数据对应的温室气体排放量 |

### 1.3. 产品目的

本项目旨在开发一套企业级碳计量数字化平台，采用现代化技术栈（React 18 + NestJS + TypeScript + Prisma）进行开发。数据库采用SQLite（开发环境）或PostgreSQL（生产环境），架构模式为B/S架构，帮助企业进行碳排放核算、管理和报告，支持GHG Protocol标准的Scope 1/2/3全范围碳核算。

### 1.4. 产品面向的用户群体

产品适用于企业的可持续发展管理人员、环境管理人员、财务人员以及需要进行碳排放核算和管理的相关人员。

## 2. 功能需求

### 2.1. 功能列表

| 功能模块 | 功能点 | 描述 | 优先级 |
|----------|--------|------|--------|
| 用户认证 | 用户注册 | 新用户账户创建 | 高 |
| 用户认证 | 用户登录 | 用户身份验证和登录 | 高 |
| 用户认证 | 密码重置 | 用户密码找回和重置 | 高 |
| 组织管理 | 组织创建 | 企业组织信息维护 | 高 |
| 组织管理 | 成员管理 | 组织成员添加和权限分配 | 高 |
| 组织管理 | 角色权限 | RBAC权限控制系统 | 高 |
| 活动数据 | 数据录入 | 碳排放活动数据录入 | 高 |
| 活动数据 | 数据导入 | 批量导入CSV/Excel数据 | 高 |
| 活动数据 | 数据查询 | 活动数据检索和筛选 | 高 |
| 计算引擎 | 排放计算 | 基于活动数据计算碳排放 | 高 |
| 计算引擎 | 因子管理 | 排放因子维护和管理 | 高 |
| 报表分析 | 统计报表 | 生成碳排放统计报表 | 高 |
| 报表分析 | 趋势分析 | 碳排放趋势图表展示 | 中 |
| 报表分析 | 数据导出 | 报表数据导出为Excel/CSV | 中 |
| 系统设置 | 参数配置 | 系统运行参数设置 | 中 |

### 2.2. 详细功能描述

#### 2.2.1. 用户认证模块
- 用户注册：提供新用户注册功能，需验证邮箱有效性
- 用户登录：支持用户名/密码登录，提供JWT令牌认证
- 密码重置：通过邮箱验证重置用户密码

#### 2.2.2. 组织管理模块
- 组织创建：企业可创建组织信息，包括基本信息、行业分类等
- 成员管理：组织管理员可添加成员，分配角色和权限
- 角色权限：基于角色的访问控制（RBAC），支持ADMIN/MANAGER/MEMBER/READONLY四级权限

#### 2.2.3. 活动数据模块
- 数据录入：提供表单界面录入各类碳排放活动数据（电力消耗、燃料燃烧、商务出行等）
- 数据导入：支持CSV/Excel格式批量导入活动数据
- 数据查询：支持按时间、类型、设施等多条件组合查询

#### 2.2.4. 计算引擎模块
- 排放计算：基于GHG Protocol标准，支持Scope 1/2/3全范围碳核算
- 因子管理：维护系统内置排放因子和组织自定义排放因子

#### 2.2.5. 报表分析模块
- 统计报表：按Scope、类别、时间等维度生成碳排放统计报表
- 趋势分析：以图表形式展示碳排放趋势变化
- 数据导出：支持将报表数据导出为Excel/CSV格式

#### 2.2.6. 系统设置模块
- 参数配置：配置系统运行所需的各种参数

## 3. 安全需求

### 3.1. 应用安全需求

本系统针对碳计量业务特点，在应用安全方面有以下要求：

1. **身份认证安全**：采用JWT双令牌机制（Access Token + Refresh Token），确保用户会话安全。支持多因素认证，提高账户安全性。

2. **权限控制安全**：基于RBAC模型实现细粒度权限控制，支持组织级数据隔离。不同角色用户只能访问其权限范围内的数据和功能。

3. **接口安全防护**：所有API接口采用HTTPS加密传输，防止数据在传输过程中被窃取或篡改。实现接口限流机制，防止恶意请求攻击。

4. **输入验证与过滤**：对所有用户输入进行严格验证和过滤，防止SQL注入、XSS跨站脚本等常见Web攻击。

5. **会话管理安全**：实现会话超时机制，用户长时间无操作自动登出。支持单点登录和单设备登录限制。

6. **审计日志记录**：完整记录用户操作日志，包括登录、数据修改、计算操作等关键行为，便于安全审计和问题追溯。

7. **密码安全策略**：强制用户使用强密码（至少8位，包含大小写字母、数字和特殊字符），定期更换密码，防止弱密码风险。

8. **CSRF防护**：实现跨站请求伪造防护机制，确保只有合法的请求才能被执行。

9. **安全头配置**：配置适当的安全HTTP头，如Content-Security-Policy、X-Frame-Options等，增强Web应用安全性。

10. **第三方组件安全**：定期更新依赖库和框架，及时修复已知安全漏洞。

### 3.2. 数据安全需求

本系统的数据安全需求主要考虑以下几方面：

1. **数据传输安全**：所有敏感数据在网络传输过程中均采用TLS 1.2及以上加密协议进行保护。

2. **数据存储安全**：用户密码等敏感信息采用 bcrypt 算法进行哈希存储，其他敏感业务数据根据需要进行加密存储。

3. **数据备份与恢复**：建立完善的数据备份机制，支持每日增量备份和每周全量备份，确保数据丢失时能够快速恢复。

4. **数据完整性保护**：通过数据库约束和应用层校验确保数据完整性，防止非法数据写入。

5. **数据隐私保护**：严格遵守相关法律法规，对用户隐私数据进行脱敏处理，未经授权不得泄露用户信息。

## 4. 性能需求

### 4.1. 系统性能

系统整体使用B/S架构，具体性能要求如下：

1. **平均响应速度**：
   - （1）单一条件数据查询平均响应时间小于3秒；
   - （2）组合条件数据查询和一般统计平均响应时间小于10秒；
   - （3）复杂统计汇总平均响应时间小于60秒；
   - （4）平均页面处理时间不超过10秒；
   - （5）系统保障7×24小时不间断运行

2. **数据处理能力**：能大规模、高质量地处理问题，提供高速度、高效率、实时、及时的计算与信息处理能力。

3. **容量和吞吐量**：系统应支持至少100用户的同时并发在线。

## 5. 系统运行环境

### 5.1. 硬件

#### 5.1.1. 应用服务器

- CPU主频：8-core 2.85 GHz以上
- 内存：64GB以上
- 硬盘：300GB以上

#### 5.1.2. 数据库服务器

- CPU主频：16-core 3.6 GHz以上
- 内存：128GB以上
- 硬盘：300GB以上

### 5.2. 软件

#### 5.2.1. 操作系统

- Linux：Ubuntu 20.04 LTS或CentOS 8及以上版本
- Windows：Windows Server 2019或Windows 10及以上版本

#### 5.2.2. Web服务中间件

- Node.js：Node.js 18.x或更高版本
- Nginx：Nginx 1.18或更高版本

#### 5.2.3. 数据库

- 开发环境：SQLite 3.35或更高版本
- 生产环境：PostgreSQL 13或更高版本

#### 5.2.4. 客户端

- 浏览器：Chrome 90+、Firefox 88+、Safari 14+、Edge 90+等现代浏览器